{"version":3,"sources":["pages/SearchPage/fragments/_ResultFragment.jsx","pages/SearchPage/index.jsx"],"names":["ResultFragment","_ref","myBooks","result","updateShelf","showPreloader","react_default","a","createElement","components","length","className","map","book","myBook","find","id","bookShelf","shelf","key","currentShelf","SearchPage","state","searchValue","timeout","_this2","this","setState","BooksAPI","then","data","Array","isArray","value","_this3","clearTimeout","setTimeout","searchBooks","_this4","react_router_dom","to","type","placeholder","onChange","e","debounceSearch","target","_ResultFragment_ResultFragment","props","React","Component"],"mappings":"kNAKaA,SAAiB,SAAAC,GAKxB,IAJJC,EAIID,EAJJC,QACAC,EAGIF,EAHJE,OACAC,EAEIH,EAFJG,YAGA,OADIH,EADJI,cAE0BC,EAAAC,EAAAC,cAACC,EAAA,EAAD,MAEtBN,EAAOO,OAAS,EAEhBJ,EAAAC,EAAAC,cAAA,OAAKG,UAAU,SACZR,EAAOS,IAAI,SAACC,GACX,IAAMC,EAASZ,EAAQa,KAAK,SAACD,GAAD,OAAYA,EAAOE,KAAOH,EAAKG,KACrDC,EAAYH,EAASA,EAAOI,MAAQ,OAE1C,OACEZ,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEU,IAAKN,EAAKG,GACVH,KAAMA,EACNO,aAAcH,EACdb,YAAaA,OAQlBE,EAAAC,EAAAC,cAAA,OAAKG,UAAU,gBAAf,6eC1BHU,oMACJC,MAAQ,CACNC,YAAa,GACbpB,OAAQ,GACRqB,QAAS,EACTnB,eAAe,oDAGjB,SAAYkB,GAAa,IAAAE,EAAAC,KACnBH,EAAYb,OAAS,IACvBgB,KAAKC,SAAS,CAAEtB,eAAe,IAE/BuB,IAAqBL,GAAaM,KAAK,SAACC,GAGtC,OAFAL,EAAKE,SAAS,CAAEtB,eAAe,IAE3B0B,MAAMC,QAAQF,GACTL,EAAKE,SAAS,CAAExB,OAAQ2B,IAG1BL,EAAKE,SAAS,CAAExB,OAAQ,sCAKrC,SAAe8B,GAAO,IAAAC,EAAAR,KAGpB,GAFAA,KAAKC,SAAS,CAAEJ,YAAaU,IAEzBA,EAAMvB,OAAS,EACjB,OAAOgB,KAAKC,SAAS,CAAExB,OAAQ,KAGjCgC,aAAaT,KAAKJ,MAAME,SAExB,IAAMA,EAAUY,WAAW,WACzBF,EAAKG,YAAYJ,IAChB,KAEHP,KAAKC,SAAS,CACZH,QAASA,0BAIb,WAAS,IAAAc,EAAAZ,KACP,OACEpB,EAAAC,EAAAC,cAAA,OAAKG,UAAU,QACbL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,cACbL,EAAAC,EAAAC,cAAC+B,EAAA,EAAD,CAAM5B,UAAU,eAAe6B,GAAG,KAAlC,SAGAlC,EAAAC,EAAAC,cAAA,OAAKG,UAAU,gBACbL,EAAAC,EAAAC,cAAA,SACEiC,KAAK,OACLR,MAAOP,KAAKJ,MAAMC,YAClBmB,YAAY,4BACZC,SAAU,SAACC,GACTN,EAAKO,eAAeD,EAAEE,OAAOb,YAKrC3B,EAAAC,EAAAC,cAAA,OAAKG,UAAU,kBACbL,EAAAC,EAAAC,cAACuC,EAAD,CACE7C,QAASwB,KAAKsB,MAAM9C,QACpBC,OAAQuB,KAAKJ,MAAMnB,OACnBE,cAAeqB,KAAKJ,MAAMjB,cAC1BD,YAAasB,KAAKsB,MAAM5C,uBAjEX6C,IAAMC,WAyEhB7B","file":"static/js/2.e208cbfe.chunk.js","sourcesContent":["import React from 'react';\n\nimport { Preloader, BookCard } from '../../../components';\nimport './_result_fragment.scss';\n\nexport const ResultFragment = ({\n  myBooks,\n  result,\n  updateShelf,\n  showPreloader,\n}) => {\n  if (showPreloader) return <Preloader />;\n\n  if (result.length > 0) {\n    return (\n      <div className=\"books\">\n        {result.map((book) => {\n          const myBook = myBooks.find((myBook) => myBook.id === book.id);\n          const bookShelf = myBook ? myBook.shelf : 'none';\n\n          return (\n            <BookCard\n              key={book.id}\n              book={book}\n              currentShelf={bookShelf}\n              updateShelf={updateShelf}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  return <div className=\"empty_result\">Nothing is found</div>;\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { ResultFragment } from './fragments';\nimport * as BooksAPI from '../../BooksAPI';\nimport './index.scss';\n\nclass SearchPage extends React.Component {\n  state = {\n    searchValue: '',\n    result: [],\n    timeout: 0,\n    showPreloader: false,\n  };\n\n  searchBooks(searchValue) {\n    if (searchValue.length > 0) {\n      this.setState({ showPreloader: true });\n\n      BooksAPI.searchBooks(searchValue).then((data) => {\n        this.setState({ showPreloader: false });\n\n        if (Array.isArray(data)) {\n          return this.setState({ result: data });\n        }\n\n        return this.setState({ result: [] });\n      });\n    }\n  }\n\n  debounceSearch(value) {\n    this.setState({ searchValue: value });\n\n    if (value.length < 1) {\n      return this.setState({ result: [] });\n    }\n\n    clearTimeout(this.state.timeout);\n\n    const timeout = setTimeout(() => {\n      this.searchBooks(value);\n    }, 700);\n\n    this.setState({\n      timeout: timeout,\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"page\">\n        <div className=\"search_bar\">\n          <Link className=\"close_search\" to=\"/\">\n            Close\n          </Link>\n          <div className=\"search_input\">\n            <input\n              type=\"text\"\n              value={this.state.searchValue}\n              placeholder=\"Search by title or author\"\n              onChange={(e) => {\n                this.debounceSearch(e.target.value);\n              }}\n            />\n          </div>\n        </div>\n        <div className=\"search_results\">\n          <ResultFragment\n            myBooks={this.props.myBooks}\n            result={this.state.result}\n            showPreloader={this.state.showPreloader}\n            updateShelf={this.props.updateShelf}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchPage;\n"],"sourceRoot":""}